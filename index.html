<!DOCTYPE html>
<html>
<head>
	<title></title>
  <script>
    var ponies = {
      "twilight":40,
      "aj":30,
      "rarity":24,
      "fluttershy":16,
      "pinkie":10,
      "dash":5
    }
    window.onload = function() {
        var voteForm        = document.getElementById('choices');

        loadVoting();

        voteForm.onsubmit = function(e) {
          e.preventDefault();
          var choice = document.querySelector("#choices INPUT:checked");
          if(typeof choice !== "null") {
            ponies[choice.dataset.pony] += 1;
            loadVoting();
          }
        }

        function loadVoting() {
          var voteButton      = document.createElement("button");
          var voteText        = document.createTextNode("Vote Best Pony");

          //clear the elements in the form
          while (voteForm.hasChildNodes()) {
              voteForm.removeChild(voteForm.lastChild);
          }

          voteButton.type = "submit";
          voteButton.appendChild(voteText);

          for(pony in ponies) {
            var choiceLabel            = document.createElement("label");
            var choiceRadio            = document.createElement("input");
            var choiceText             = document.createTextNode(pony + "(" + ponies[pony] + ")");
            choiceLabel.for            = pony;
            choiceRadio.type           = "radio";
            choiceRadio.value          = pony;
            choiceRadio.dataset.pony  = pony;
            choiceRadio.name           = "ponies";

            choiceLabel.appendChild(choiceRadio);
            choiceLabel.appendChild(choiceText);
            voteForm.appendChild(choiceLabel);
            voteForm.appendChild(voteButton);
        }
      }
    }
  </script>
</head>
<body>
	<form id="choices">
  </form>
</body>
</html>
